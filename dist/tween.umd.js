!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tween",[],e):"object"==typeof exports?exports.tween=e():t.tween=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=3)}([function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new s(n,r||t,i),c=o?o+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},a.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,i,s){var u=o?o+t:t;if(!this._events[u])return!1;var c,a,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,s),!0}for(a=1,c=new Array(l-1);a<l;a++)c[a-1]=arguments[a];f.fn.apply(f.context,c)}else{var h,p=f.length;for(a=0;a<p;a++)switch(f[a].once&&this.removeListener(t,f[a].fn,void 0,!0),l){case 1:f[a].fn.call(f[a].context);break;case 2:f[a].fn.call(f[a].context,e);break;case 3:f[a].fn.call(f[a].context,e,n);break;case 4:f[a].fn.call(f[a].context,e,n,r);break;default:if(!c)for(h=1,c=new Array(l-1);h<l;h++)c[h-1]=arguments[h];f[a].fn.apply(f[a].context,c)}}return!0},a.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||c(this,i);else{for(var u=0,a=[],f=s.length;u<f;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&a.push(s[u]);a.length?this._events[i]=1===a.length?a[0]:a:c(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=o,a.EventEmitter=a,t.exports=a},function(t,e,n){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){const e=Date.now();t.performance||(t.performance={}),t.performance.now=()=>Date.now()-e}let e=Date.now();const n=["ms","moz","webkit","o"];for(let e=0;e<n.length&&!t.requestAnimationFrame;++e){const r=n[e];t.requestAnimationFrame=t[r+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r+"CancelAnimationFrame"]||t[r+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=t=>{if("function"!=typeof t)throw new TypeError(t+"is not a function");const n=Date.now();let r=16+e-n;return r<0&&(r=0),e=n,setTimeout(()=>{e=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=t=>clearTimeout(t))}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"Animate",(function(){return T})),n.d(e,"update",(function(){return L})),n.d(e,"List",(function(){return k})),n.d(e,"Easing",(function(){return o})),n.d(e,"Transform",(function(){return Q}));n(1);const r={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Bounce.In(2*t):.5*r.Bounce.Out(2*t-1)+.5}}};var o=r,i=n(0),s=n.n(i);var u={filter(t,e){let n=!1,r=0,o=0;const i=t.length;for(let s=0;s<i-o;s++)e(t[s],o+s)?n&&(n=!n,t.splice(r,s-r),o+=s-r,s=r):n||(r=s,n=!n);return n&&t.splice(r,t.length-r),t},clone(t,e){const n=Array.isArray(t)?[]:{};for(const r in t){const o=t[r];let i=e(r,o);n[r]=void 0===i?"object"==typeof o?this.clone(o,e):o:i}return n},isDef:t=>null!=t,cached(t){const e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}};function c(t){return"object"==typeof t?JSON.stringify(t,null,"\t"):`"${t}"`}class a extends Error{constructor(t,e){super(`from and to has different format:\n"from":  ${c(t)},\n"to"  : ${c(e)}.\n`),this.name="Parse Error"}}function f(t,e){if(t===e)return null;if("object"==typeof e&&"object"==typeof t)return function t(e,n,r){for(const o in n){const i=n[o],s=e[o];if(s!==i)if("object"==typeof i&&"object"==typeof s){const e={key:o,list:[]};t(s,i,e.list),r.push(e)}else{if("number"!=typeof i||"number"!=typeof s)throw new a(s,i);r.push({key:o,from:s,step:i-s})}}return r}(t,e,[]);if("number"==typeof e&&"number"==typeof t)return{from:t,step:e-t};throw new a(t,e)}function l(t,e,n={}){return null===t?n:Array.isArray(t)?n?function t(e,n,r={}){return e.forEach(e=>{void 0!==e.from?r[e.key]=e.from+n*e.step:"object"==typeof r[e.key]?t(e.list,n,r[e.key]):r[e.key]=t(e.list,n,{})}),r}(t,e,n):void 0:t.from+e*t.step}class h{constructor(t,e){this.el=e,this.isPlaying=!1,this.isCompleted=!1,this.isReversed=!1,this.speed=1,this.animate=t,this.time=0,this.emit("init")}emit(t,...e){this.animate.emit(t,this,...e)}every(t){this.el.forEach((e,n)=>{null!=e&&t(e,n)})}start(t){return this.emit("start"),"function"==typeof t&&(this.callback=t),this.begin(),this}begin(){this.emit("begin"),this.isCompleted=!1,this.startTime=performance.now(),this.time=this.startTime,this.isPlaying=!0}end(){this.isCompleted=!0,this.emit("end"),this.isCompleted?this.complete():this.begin()}play(){this.isPlaying=!0}stop(){this.isPlaying=!1}complete(){this.emit("complete"),this.stop(),"function"==typeof this.callback&&this.callback(),this.isRoot&&this.destroy()}destroy(){this.el=null,this.animate=null,this.callback=null}}function p(){}class d extends h{constructor(t,e){if(super(t,e),"function"==typeof t.update?this.onUpdate=t.update:this.onUpdate=p,["from","to"].some(e=>"function"==typeof t[e])||!u.isDef(t.from)){const n="function"==typeof t.from,r="function"==typeof t.to;this.parsed=e.map((e,o)=>f(n?t.from(e,o):e,r?t.to(e,o):t.to)),this.noFrom=!0,t.assign||(this.value=[])}else this.parsed=f(t.from,t.to),this.noFrom=!1}start(t){return this.animate.list.push(this),super.start(t)}begin(){super.begin()}complete(){const t=this.animate.list,e=t.indexOf(this);e>-1&&t.splice(e,1),super.complete()}update(t){"number"==typeof t?this.time+=t:this.time=performance.now();const{animate:e,isReversed:n,speed:r,noFrom:o,parsed:i}=this,{time:s,easing:u,assign:c}=e;let a,f=(this.time-this.startTime)*r/s,h=!1;f<1?a=u(n?1-f:f):(a=n?0:1,h=!0),o?c?this.el.forEach((t,e)=>{this.onUpdate(t,l(i[e],a,t))}):this.el.forEach((t,e)=>{this.value[e]=l(i[e],a,this.value[e]),this.onUpdate(t,this.value[e])}):c?this.el.forEach(t=>{this.onUpdate(t,l(i,a,t))}):(this.value=l(i,a,this.value),this.el.forEach((t,e)=>{this.onUpdate(t,this.value)})),h&&this.end()}destroy(){super.destroy(),this.parsed=null,this.onUpdate=null}}class y extends h{constructor(t,e,n){super(t,e),this.instanceChain=n}next(){const{count:t,instanceChain:e,isReversed:n}=this;if(t>=e.length)return void this.end();const r=e[n?e.length-1-t:t];this.count+=1,this.instance=r;const o=t=>this.next(t),i={isReversed:this.isReversed,speed:this.speed};if(Array.isArray(r)){const t=function(t,e){let n=0;if("function"!=typeof e)throw new Error("callback should be function");return function(){n+=1,n===t&&e()}}(r.length,o);r.forEach(e=>{Object.assign(e,i),e.start(t)})}else Object.assign(r,i),r.start(o)}play(){const t=this.instance;Array.isArray(t)?t.forEach(t=>t.play()):t.play()}stop(){const t=this.instance;Array.isArray(t)?t.forEach(t=>t.stop()):t.stop()}begin(){super.begin(),this.count=0,this.next()}destroy(){super.destroy(),this.instanceChain.forEach(t=>t.destroy()),this.instanceChain=null,this.instance=null}}function m(t){throw new Error(t)}const v=Object.prototype.hasOwnProperty;function b(t,e){return v.call(t,e)}const w=Object.prototype.toString;function g(t){const e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}const O=/\B([A-Z])/g,A=g(t=>t.replace(O,"-$1").toLowerCase()),x=g(t=>t.charAt(0).toUpperCase()+t.slice(1));function j(t,e,n){const r=e[t],o=!b(n,t);let i=n[t];const s=M(Boolean,r.type);if(s>-1)if(o&&!b(r,"default"))i=!1;else if(""===i||i===A(t)){const t=M(String,r.type);(t<0||s<t)&&(i=!0)}return void 0===i&&(i=function(t,e){if(!b(t,"default"))return;const n=t.default;r=n,null!==r&&"object"==typeof r&&m('Invalid default value for prop "'+e+'": Props with type Object/Array must use a factory function to return the default value.');var r;return"function"==typeof n&&"Function"!==C(t.type)?n():n}(r,t)),function(t,e,n,r){if(t.required&&r)return void m('Missing required prop: "'+e+'"');if(null==n&&!t.required)return;let o=t.type,i=!o||!0===o;const s=[];if(o){Array.isArray(o)||(o=[o]);for(let t=0;t<o.length&&!i;t++){const e=E(n,o[t]);s.push(e.expectedType||""),i=e.valid}}if(!i)return void m(function(t,e,n){let r=`Invalid prop: type check failed for prop "${t}". Expected `+n.map(x).join(", ");const o=n[0],i=function(t){return w.call(t).slice(8,-1)}(e),s=R(e,o),u=R(e,i);1===n.length&&P(o)&&!function(...t){return t.some(t=>"boolean"===t.toLowerCase())}(o,i)&&(r+=" with value "+s);r+=`, got ${i} `,P(i)&&(r+=`with value ${u}.`);return r}(e,n,s));const u=t.validator;u&&(u(n)||m('Invalid prop: custom validator check failed for prop "'+e+'".'))}(r,t,i,o),i}const _=/^(String|Number|Boolean|Function|Symbol)$/;function E(t,e){let n;const r=C(e);if(_.test(r)){const o=typeof t;n=o===r.toLowerCase(),n||"object"!==o||(n=t instanceof e)}else"Object"===r?(o=t,n="[object Object]"===w.call(o)):n="Array"===r?Array.isArray(t):t instanceof e;var o;return{valid:n,expectedType:r}}function C(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function I(t,e){return C(t)===C(e)}function M(t,e){if(!Array.isArray(e))return I(e,t)?0:-1;for(let n=0,r=e.length;n<r;n++)if(I(e[n],t))return n;return-1}function R(t,e){return"String"===e?`"${t}"`:"Number"===e?""+Number(t):""+t}function P(t){return["string","number","boolean"].some(e=>t.toLowerCase()===e)}const k=[];function F(t){return t instanceof B||t instanceof U||!1}function L(t,e=k){if(0!==e.length)for(let n=0,r=e.length;n<r;n++)e[n].isPlaying&&e[n].update(t)}function T(t){return Array.isArray(t)||F(t)||"number"==typeof t?new U(...arguments):new B(...arguments)}function S(t,e){if("function"!=typeof e)throw new Error("extend params error");const n=new U(t);return e(n),n}const q={to:{default:1,required:!0},easing:{type:Function,default:o.Linear.None},time:{default:1e3},list:{type:Array,default:()=>k},assign:{default:!0,type:Boolean}},D=["from","to","easing","time","list","update","assign"];T.renderableList=["from","to","time"];class B extends s.a{constructor(t){if(super(),t){const r=(e=q,n=t,Object.keys(e).forEach(t=>{n[t]=j(t,e,n)}),n);Object.assign(this,r),T.renderableList.some(t=>"function"==typeof this[t])&&(this.needRender=!0)}var e,n}render(t={},e=T.renderableList){if(!this.needRender)return null;let n=new B;return e.forEach(e=>{"function"==typeof this[e]&&(n[e]=this[e](t))}),D.forEach(t=>{n.hasOwnProperty(t)||(n[t]=this[t])}),e.forEach(t=>{q[t]&&j(t,q,n)}),["needRender","_events","_eventsCount"].forEach(t=>{n[t]=this[t]}),n.needRender=!1,n}apply(...t){if(this.needRender)throw new Error("you should render before apply");let e;"function"==typeof t[t.length-1]&&(e=t.pop());const n=new d(this,t);return n.isRoot=!0,n.start(e),n}extend(t,...e){let n={},r=this;if("object"==typeof t){const t={};Object.keys(this).forEach(e=>{"_"!==e.charAt(0)&&(t[e]=this[e])}),Object.assign(t,n),r=new B(t),function(t,e){const{_events:n,_eventsCount:r}=t;e._events=u.clone(n,(n,r)=>{if("context"===n)return r===t?e:r}),e._eventsCount=r}(this,r)}else t&&e.unshift(t);return e.reduce((t,e)=>S(t,e),r)}}const $=u.cached((function(t){return new B({from:0,to:1,time:t})}));class U extends s.a{constructor(...t){if(super(),!function t(e){return!(!Array.isArray(e)||!e.every(e=>t(e)))||!("number"!=typeof e&&!F(e))}(t))throw new Error("Animate arguments error");t.some(t=>"object"==typeof t&&t.needRender)&&(this.needRender=!0),this.chain=t}extend(...t){return t.reduce((t,e)=>S(t,e),this)}render(t={},e=T.renderableList){if(!this.needRender)return null;const n=new U;return n.chain=this.chain.map(n=>"object"==typeof n&&n.needRender?n.render(t,e):n),["needRender","_events","_eventsCount"].forEach(t=>{n[t]=this[t]}),n.needRender=!1,n}apply(...t){if(this.needRender)throw new Error("you should render before apply");let e;"function"==typeof t[t.length-1]&&(e=t.pop());const n=new y(this,t,function t(e,n){if(Array.isArray(e))return e.map(e=>t(e,n));if("number"==typeof e){const t=$(e),r=new d(t,n);return r.update=function(t){t?this.time+=t:this.time=performance.now(),this.time-this.startTime>=this.animate.time&&this.end()},r}if(e instanceof B)return new d(e,n);if(e instanceof U)return new y(e,n,t(e.chain,n));throw new Error("Aniamte arguments dont fit format")}(this.chain,t));return n.isRoot=!0,n.start(e),n}}const N={register(t,e){this[t]=function(...t){return 1===t.length&&F(t[0])?e(t[0]):function(n){e(n,...t)}}}};N.register("loop",(function(t,e){t.on("start",t=>{t.loopCount=e}),t.on("end",t=>{t.loopCount--,t.loopCount<=0?t.isCompleted=!0:t.isCompleted=!1})})),N.register("reverse",(function(t){t.on("start",t=>{t.isReversed=!t.isReversed})})),N.register("yoyo",(function(t){t.on("start",t=>{t.isYoyoed=!1}),t.on("end",t=>{t.isReversed=!t.isReversed,t.isYoyoed||(t.isCompleted=!1),t.isYoyoed=!0})}));var Q=N}])}));
//# sourceMappingURL=tween.umd.js.map